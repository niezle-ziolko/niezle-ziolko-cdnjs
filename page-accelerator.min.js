function e(t){return new Promise(function(e,r,n){(n=new XMLHttpRequest).open("GET",t,n.withCredentials=!0),n.onload=function(){(200===n.status?e:r)()},n.send()})}var r,n=(r=document.createElement("link")).relList&&r.relList.supports&&r.relList.supports("prefetch")?function(t){return new Promise(function(e,r,n){(n=document.createElement("link")).rel="prefetch",n.href=t,n.onload=e,n.onerror=r,document.head.appendChild(n)})}:e,t=window.requestIdleCallback||function(e){var r=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-r))}})},1)},o=new Set,i=new Set,c=!1;function a(e){if(e){if(e.saveData)return new Error("Save-Data is enabled");if(/2g/.test(e.effectiveType))return new Error("network conditions are poor")}return!0}function s(r,t,s){var u=a(navigator.connection);return u instanceof Error?Promise.reject(new Error("Cannot prefetch, "+u.message)):(0<i.size&&!c&&console.warn("[Warning] You are using both prefetching and prerendering on the same document"),Promise.all([].concat(r).map(function(r){if(!o.has(r))return o.add(r),(t?function(r){return window.fetch?fetch(r,{credentials:"include"}):e(r)}:n)(new URL(r,location.href).toString())})))}function u(e,r){var n=a(navigator.connection);if(n instanceof Error)return Promise.reject(new Error("Cannot prerender, "+n.message));if(!HTMLScriptElement.supports("speculationrules"))return s(e),Promise.reject(new Error("This browser does not support the speculation rules API. Falling back to prefetch."));if(document.querySelector('script[type="speculationrules"]'))return Promise.reject(new Error("Speculation Rules is already defined and cannot be altered."));for(var t=0,u=[].concat(e);t<u.length;t+=1){var f=u[t];if(window.location.origin!==new URL(f,window.location.href).origin)return Promise.reject(new Error("Only same origin URLs are allowed: "+f));i.add(f)}0<o.size&&!c&&console.warn("[Warning] You are using both prefetching and prerendering on the same document");n=function(e){var r=document.createElement("script");r.type="speculationrules",r.text='{"prerender":[{"source": "list","urls": ["'+Array.from(e).join('","')+'"]}]}';try{document.head.appendChild(r)}catch(e){return e}return!0}(i);return!0===n?Promise.resolve():Promise.reject(n)}exports.listen=function(n){var a,f,l,r,d,h,p,e,m,w,g,E,v,y;if(n=n||{},window.IntersectionObserver)return E=n.throttle||1/0||1,v=[],a=(e=[function(e){1<v.push(e)||P()},function(){y--,P()}])[y=0],f=e[1],l=n.limit||1/0,r=n.origins||[location.hostname],d=n.ignores||[],h=n.delay||0,p=[],e=n.timeoutFn||t,m="function"==typeof n.hrefFn&&n.hrefFn,w=n.prerender||!1,c=n.prerenderAndPrefetch||!1,g=new IntersectionObserver(function(e){e.forEach(function(e){var r;e.isIntersecting?(p.push((e=e.target).href),r=function(){-1!==p.indexOf(e.href)&&(g.unobserve(e),(c||w)&&i.size<1?u(m?m(e):e.href).catch(function(e){if(!n.onError)throw e;n.onError(e)}):o.size<l&&!w&&a(function(){s(m?m(e):e.href,n.priority).then(f).catch(function(e){f(),n.onError&&n.onError(e)})}))},h?setTimeout(r,h):r()):-1<(r=p.indexOf((e=e.target).href))&&p.splice(r)})},{threshold:n.threshold||0}),e(function(){(n.el||document).querySelectorAll("a").forEach(function(e){r.length&&!r.includes(e.hostname)||function r(n,e){return Array.isArray(e)?e.some(function(e){return r(n,e)}):(e.test||e).call(e,n.href,n)}(e,d)||g.observe(e)})},{timeout:n.timeout||2e3}),function(){o.clear(),g.disconnect()};function P(){y<E&&0<v.length&&(v.shift()(),y++)}},exports.prefetch=s,exports.prerender=u;
